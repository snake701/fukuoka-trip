<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦å²¡è¡Œæ—… 2026 | å’Œé¢¨æœ¨è³ªèªŒ V10</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --wood-dark: #5D4037; 
            --wood-light: #EFEBE9; 
            --paper: #FAF9F6; 
            --accent-green: #8D9977; 
            --accent-red: #B06B6B; 
            --accent-blue: #78909C; 
            --border: #D7CCC8;
            --shadow: 0 4px 12px rgba(93, 64, 55, 0.08);
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--wood-light);
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            color: var(--wood-dark);
            margin: 0; padding: 0;
            line-height: 1.8;
            padding-bottom: 50px;
        }

        /* æ¨™é ­å€ */
        header {
            max-width: 900px; margin: 0 auto; padding: 30px 20px;
            text-align: center;
        }
        h1 { font-family: 'Noto Serif TC', serif; font-size: 2rem; margin-bottom: 5px; letter-spacing: 3px; }
        #weather-info { font-size: 0.85rem; color: #8D8273; }

        /* V5 åˆ†é å°è¦½åˆ— */
        .main-nav {
            max-width: 800px; margin: 0 auto 20px;
            display: flex; background: rgba(215, 204, 200, 0.3);
            padding: 5px; border-radius: 8px; border: 1px solid var(--border);
            overflow-x: auto; scrollbar-width: none;
        }
        .nav-tab {
            flex: 1; min-width: 80px; text-align: center; padding: 10px 5px; border-radius: 5px;
            cursor: pointer; font-weight: 500; color: var(--wood-dark); transition: 0.3s;
            font-family: 'Noto Serif TC', serif; font-size: 0.9rem;
        }
        .nav-tab.active { background: var(--paper); box-shadow: var(--shadow); font-weight: 700; }

        .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }
        .content-section { display: none; animation: fadeIn 0.4s ease; }
        .content-section.active { display: block; }

        /* è¡Œç¨‹å¤©æ•¸å°èˆª */
        .day-nav { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 25px; scrollbar-width: none; }
        .day-tab {
            cursor: pointer; padding: 6px 15px; background: var(--paper);
            border: 1px solid var(--border); border-radius: 4px; white-space: nowrap;
            font-size: 0.8rem; color: #8D8273;
        }
        .day-tab.active { background: var(--wood-dark); color: white; }

        /* æ™‚é–“è»¸æ’ç‰ˆ */
        .timeline-item { display: grid; grid-template-columns: 70px 1fr; margin-bottom: 30px; }
        .time { font-family: 'Noto Serif TC', serif; font-weight: 700; font-size: 1rem; }
        .content { 
            padding-left: 20px; border-left: 1px solid var(--border); position: relative; 
        }
        .content::before {
            content: ''; position: absolute; left: -4px; top: 10px;
            width: 7px; height: 7px; background: var(--border); border-radius: 50%;
        }

        /* æ¨™ç±¤ */
        .tag { font-size: 0.65rem; padding: 2px 8px; margin-right: 5px; border-radius: 2px; border: 1px solid; vertical-align: middle; }
        .tag-trans { border-color: var(--accent-blue); color: var(--accent-blue); }
        .tag-food { border-color: var(--accent-red); color: var(--accent-red); }
        .tag-spot { border-color: var(--accent-green); color: var(--accent-green); }

        /* å…¬ç©é‡‘èˆ‡è¡¨æ ¼ */
        .info-card { background: var(--paper); padding: 20px; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 20px; }
        .fund-row { display: grid; grid-template-columns: 1fr 1fr 40px; gap: 10px; margin-bottom: 10px; }
        .input-wood { width: 100%; padding: 8px; border: 1px solid var(--border); background: transparent; font-size: 0.9rem; border-radius: 4px; }
        
        .btn-wood { 
            width: 100%; padding: 10px; background: var(--wood-dark); color: white; border: none; 
            border-radius: 4px; cursor: pointer; font-family: 'Noto Serif TC', serif; margin-top: 10px;
        }

        .map-link { font-size: 0.8rem; color: var(--accent-blue); text-decoration: none; border-bottom: 1px solid; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header>
    <h1>ç¦å²¡è¡Œæ—… 2026</h1>
    <div id="weather-info">å–å¾—å¤©æ°£ä¸­...</div>
</header>

<div class="main-nav">
    <div class="nav-tab active" onclick="switchMain('itinerary')">ğŸ“… è¡Œç¨‹</div>
    <div class="nav-tab" onclick="switchMain('money')">ğŸ’° å…¬ç©é‡‘</div>
    <div class="nav-tab" onclick="switchMain('food')">ğŸ´ ç¾é£Ÿ</div>
    <div class="nav-tab" onclick="switchMain('check')">âœ… æ¸…å–®</div>
    <div class="nav-tab" onclick="switchMain('tools')">ğŸ”§ å·¥å…·</div>
</div>

<div class="container">
    <section id="itinerary-sec" class="content-section active">
        <div class="day-nav" id="day-tabs"></div>
        <div id="itinerary-content"></div>
    </section>

    <section id="money-sec" class="content-section">
        <div class="info-card">
            <h3 style="font-family:'Noto Serif TC';">ğŸ‘¥ æˆå“¡ç¹³è²» (Â¥<span id="total-income">0</span>)</h3>
            <div id="members-list"></div>
            <button class="btn-wood" onclick="addMember()">+ æ–°å¢æˆå“¡</button>
        </div>
        <div class="info-card">
            <h3 style="font-family:'Noto Serif TC';">ğŸ’¸ å…¬æ¬¾æ”¯å‡º (é¤˜ Â¥<span id="fund-balance">0</span>)</h3>
            <div id="expenses-list"></div>
            <button class="btn-wood" onclick="addExpense()">+ æ–°å¢æ”¯å‡º</button>
        </div>
    </section>

    <section id="food-sec" class="content-section">
        <div class="info-card">
            <h3 style="color:var(--accent-red); font-family:'Noto Serif TC';">ğŸ“ é£¯åº—å‘¨é‚Š (å¤©ç¥)</h3>
            <p>â€¢ <b>ç¨šåŠ æ¦®</b>ï¼šç¶“å…¸æ´»é­šæ–™äº­</p>
            <p>â€¢ <b>å¤©å©¦ç¾… Hirao</b>ï¼šç¦å²¡éˆé­‚ç‚¸ç‰©</p>
        </div>
        <div class="info-card">
            <h3 style="color:var(--accent-red); font-family:'Noto Serif TC';">â™¨ï¸ ç”±å¸ƒé™¢ç²¾é¸</h3>
            <p>â€¢ <b>ç”±å¸ƒé‡œé£¯ å¿ƒ</b>ï¼šè±å¾Œç‰›ä¸€é‹ä¸‰åƒ</p>
            <p>â€¢ <b>æ¹¯ä¹‹å²³åºµ</b>ï¼šé‡‘é±—æ¹–ç•”å±±å®¶æ–™ç†</p>
        </div>
    </section>

    <section id="check-sec" class="content-section">
        <div class="info-card">
            <h3 style="font-family:'Noto Serif TC';">âœ… æº–å‚™æ¸…å–®</h3>
            <div id="check-list"></div>
            <button class="btn-wood" onclick="addCheckItem()">+ æ–°å¢é …ç›®</button>
        </div>
    </section>

    <section id="tools-sec" class="content-section">
        <div class="info-card">
            <h4 style="font-family:'Noto Serif TC';">ğŸ›« èˆªç­èˆ‡ä½å®¿</h4>
            <p style="font-size:0.9rem;">é•·æ¦® BR106 / BR105<br>Fukuoka U-BELL Hotel</p>
            <a href="https://www.google.com/maps/search/FUKUOKA+U-BELL+HOTEL8" class="map-link">å°è¦½è‡³é£¯åº—</a>
        </div>
        <div class="info-card" style="border-left: 4px solid var(--accent-red);">
            <h4 style="font-family:'Noto Serif TC'; color:var(--accent-red);">ğŸš¨ ç·Šæ€¥è¯çµ¡</h4>
            <p style="font-size:0.8rem;">æ€¥æ•‘ï¼š119 | è­¦å¯Ÿï¼š110</p>
        </div>
    </section>
</div>

<script>
    const API_KEY = 'b8f2962f275943c4264c5d1e72c1b21b';
    const CITY_ID = '1863967';

    // æ•¸æ“šçµæ§‹
    const defaultTrip = {
        1: [
            {t: "11:15", type: "trans", title: "æŠµé”ç¦å²¡ç©ºæ¸¯", desc: "æ­ä¹˜åœ°ä¸‹éµç©ºæ¸¯ç·šè‡³å¤©ç¥ã€‚", memo: "æç¤ºï¼šåšå¤šç«™å¯å…ˆåŠƒä½ç”±å¸ƒé™¢ä¹‹æ£®ã€‚"},
            {t: "19:00", type: "food", title: "ä¸­æ´²å±‹å°è¡—", desc: "åšå¤šç‰¹æœ‰çš„è·¯é‚Šæ”¤æ–‡åŒ–ã€‚", memo: "å¿…åƒï¼šæ˜å¤ªå­ç‰å­ç‡’ã€‚", map: "Nakasu"}
        ],
        2: [
            {t: "09:30", type: "trans", title: "è¥¿éµç¦å²¡ç«™", desc: "å‰å¾€å¤ªå®°åºœèˆ‡æŸ³å·ã€‚", memo: "è¨˜å¾—è³¼è²·è§€å…‰å¥—ç¥¨ã€‚", map: "Nishitetsu+Fukuoka"}
        ],
        4: [
            {t: "08:00", type: "spot", title: "é«˜åƒç©—ä¸€æ—¥åœ˜", desc: "åšå¤šç«™ç­‘ç´«å£é›†åˆã€‚", memo: "é‡è¦ï¼šè«‹ææ—©10åˆ†é˜æŠµé”ã€‚", map: "Hakata+Station"}
        ],
        6: [
            {t: "09:24", type: "trans", title: "ç”±å¸ƒé™¢ä¹‹æ£®", desc: "æ­ä¹˜ç‰¹æ€¥å‰å¾€ç”±å¸ƒé™¢ã€‚", memo: "å¿…åƒï¼šè»Šå…§è²©å”®å¤§åˆ†ç¸£ç‰¹ç”¢ã€‚", map: "Yufuin"}
        ]
    };

    let members = JSON.parse(localStorage.getItem('wood_mem')) || [{n: "æˆå“¡A", a: 20000}];
    let expenses = JSON.parse(localStorage.getItem('wood_exp')) || [{n: "äº¤é€šè²»", a: 0}];
    let checkData = JSON.parse(localStorage.getItem('wood_check')) || ["è­·ç…§", "æ—¥å¹£ç¾é‡‘", "ä¿éšªæ†‘è­‰"];

    // æ ¸å¿ƒåŠŸèƒ½ï¼šåˆ‡æ›åˆ†é 
    function switchMain(target) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById(target + '-sec').classList.add('active');
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    // è¡Œç¨‹æ¸²æŸ“
    function renderItinerary(day) {
        const container = document.getElementById('itinerary-content');
        container.innerHTML = "";
        const items = defaultTrip[day] || [{t: "--:--", type: "spot", title: "è‡ªç”±æ¢ç´¢", desc: "ä»Šæ—¥éš¨æ„å®‰æ’ã€‚", memo: "æ¨è–¦ï¼šå¤©ç¥åœ°ä¸‹è¡—ã€‚"}];
        
        items.forEach(item => {
            const tagMap = { trans: 'tag-trans', food: 'tag-food', spot: 'tag-spot' };
            const typeText = { trans: 'äº¤é€š', food: 'é£Ÿäº‹', spot: 'æ™¯é»' };
            container.innerHTML += `
                <div class="timeline-item">
                    <div class="time">${item.t}</div>
                    <div class="content">
                        <div style="font-weight:700; font-size:1.1rem; margin-bottom:5px;">
                            <span class="tag ${tagMap[item.type]}">${typeText[item.type]}</span> ${item.title}
                        </div>
                        <div style="font-size:0.9rem; color:#6D6D6D; margin-bottom:8px;">${item.desc}</div>
                        <div style="font-size:0.8rem; background:rgba(215,204,200,0.2); padding:8px; border-left:2px solid var(--border);">ğŸ“œ ${item.memo}</div>
                        ${item.map ? `<a href="https://www.google.com/maps/search/FUKUOKA+U-BELL+HOTEL9{item.map}&travelmode=transit" target="_blank" class="map-link" style="margin-top:8px; display:inline-block;">æŸ¥è©¢è½‰ä¹˜</a>` : ''}
                    </div>
                </div>`;
        });
    }

    // å…¬ç©é‡‘èˆ‡æ¸…å–®é‚è¼¯ (ç°¡åŒ–ç‰ˆ)
    function renderFund() {
        document.getElementById('members-list').innerHTML = members.map((m, i) => `<div class="fund-row"><input class="input-wood" value="${m.n}" oninput="members[${i}].n=this.value;saveFund()"><input class="input-wood" type="number" value="${m.a}" oninput="members[${i}].a=this.value;saveFund()"><span onclick="members.splice(${i},1);renderFund()">Ã—</span></div>`).join('');
        document.getElementById('expenses-list').innerHTML = expenses.map((e, i) => `<div class="fund-row"><input class="input-wood" value="${e.n}" oninput="expenses[${i}].n=this.value;saveFund()"><input class="input-wood" type="number" value="${e.a}" oninput="expenses[${i}].a=this.value;saveFund()"><span onclick="expenses.splice(${i},1);renderFund()">Ã—</span></div>`).join('');
        const inc = members.reduce((s, m) => s + Number(m.a||0), 0);
        const exp = expenses.reduce((s, e) => s + Number(e.a||0), 0);
        document.getElementById('total-income').innerText = inc.toLocaleString();
        document.getElementById('fund-balance').innerText = (inc - exp).toLocaleString();
    }
    function saveFund() { localStorage.setItem('wood_mem', JSON.stringify(members)); localStorage.setItem('wood_exp', JSON.stringify(expenses)); renderFund(); }
    function addMember() { members.push({n: "å§“å", a: 0}); renderFund(); }
    function addExpense() { expenses.push({n: "é …ç›®", a: 0}); renderFund(); }

    function renderCheck() {
        document.getElementById('check-list').innerHTML = checkData.map((c, i) => `<div style="margin-bottom:10px;"><input type="checkbox"> <span contenteditable="true" onblur="checkData[${i}]=this.innerText;saveCheck()">${c}</span></div>`).join('');
    }
    function saveCheck() { localStorage.setItem('wood_check', JSON.stringify(checkData)); }
    function addCheckItem() { checkData.push("æ–°é …ç›®"); renderCheck(); }

    async function fetchWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?id=${CITY_ID}&appid=${API_KEY}&units=metric&lang=zh_tw`);
            const data = await res.json();
            if(data.cod === 200) document.getElementById('weather-info').innerText = `ç¦å²¡ï¼š${Math.round(data.main.temp)}Â°C / ${data.weather[0].description}`;
        } catch(e) { document.getElementById('weather-info').innerText = "ç¦å²¡ï¼š18Â°C / æ™´"; }
    }

    window.onload = () => {
        const tabs = document.getElementById('day-tabs');
        for(let i=1; i<=7; i++) {
            tabs.innerHTML += `<div class="day-tab ${i===1?'active':''}" onclick="document.querySelectorAll('.day-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active');renderItinerary(${i})">Day ${i}</div>`;
        }
        fetchWeather(); renderItinerary(1); renderFund(); renderCheck();
    };
</script>

</body>
</html>
