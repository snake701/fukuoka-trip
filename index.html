<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦å²¡è¡Œæ—… 2026 | å¯ç·¨è¼¯æœ¨è³ªæ‰‹å¸– V11.5</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --wood-dark: #5D4037; --wood-light: #EFEBE9; --paper: #FAF9F6; 
            --accent-green: #8D9977; --accent-red: #B06B6B; --accent-blue: #78909C; 
            --border: #D7CCC8; --shadow: 0 4px 12px rgba(93, 64, 55, 0.08);
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Noto Sans TC', sans-serif; background-color: var(--wood-light);
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            color: var(--wood-dark); margin: 0; line-height: 1.8; padding-bottom: 50px;
        }
        header { max-width: 900px; margin: 0 auto; padding: 25px 20px; text-align: center; }
        h1 { font-family: 'Noto Serif TC', serif; font-size: 1.8rem; margin-bottom: 5px; letter-spacing: 2px; }
        
        /* é ‚éƒ¨å°è¦½åˆ— */
        .main-nav {
            max-width: 800px; margin: 0 auto 20px; display: flex; 
            background: rgba(215, 204, 200, 0.3); padding: 5px; border-radius: 8px; border: 1px solid var(--border);
            overflow-x: auto; scrollbar-width: none;
        }
        .nav-tab { flex: 1; min-width: 80px; text-align: center; padding: 10px 5px; border-radius: 5px; cursor: pointer; font-family: 'Noto Serif TC', serif; font-size: 0.9rem; }
        .nav-tab.active { background: var(--paper); box-shadow: var(--shadow); font-weight: 700; }

        .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.4s ease; }

        /* è¡Œç¨‹å°èˆª */
        .day-nav { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 20px; scrollbar-width: none; }
        .day-tab { cursor: pointer; padding: 6px 15px; background: var(--paper); border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; white-space: nowrap; }
        .day-tab.active { background: var(--wood-dark); color: white; }

        /* è¡Œç¨‹å¡ç‰‡æ’ç‰ˆ */
        .timeline-item { display: grid; grid-template-columns: 70px 1fr; margin-bottom: 25px; }
        .time { font-family: 'Noto Serif TC', serif; font-weight: 700; font-size: 0.95rem; padding-top: 5px; }
        .content { padding-left: 20px; border-left: 1px solid var(--border); position: relative; padding-bottom: 10px; }
        .content::before { content: ''; position: absolute; left: -4px; top: 12px; width: 7px; height: 7px; background: var(--border); border-radius: 50%; }

        .tag { font-size: 0.65rem; padding: 2px 8px; border-radius: 2px; border: 1px solid; margin-right: 5px; }
        .tag-trans { border-color: var(--accent-blue); color: var(--accent-blue); }
        .tag-food { border-color: var(--accent-red); color: var(--accent-red); }
        .tag-spot { border-color: var(--accent-green); color: var(--accent-green); }
        .tag-hotel { background: var(--wood-dark); color: white; border-color: var(--wood-dark); }

        .item-memo { font-size: 0.8rem; background: rgba(215,204,200,0.2); padding: 8px; border-left: 2px solid var(--border); margin: 8px 0; }
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        .btn-wood-sm { font-size: 0.7rem; cursor: pointer; background: #fff; border: 1px solid var(--border); padding: 3px 10px; border-radius: 4px; color: var(--wood-dark); }

        /* ç·¨è¼¯è¡¨å–®æ¨£å¼ */
        .info-card { background: var(--paper); padding: 20px; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 20px; }
        .input-wood { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border); border-radius: 4px; font-size: 0.9rem; }
        .btn-save { background: var(--wood-dark); color: white; width: 100%; padding: 12px; border: none; border-radius: 4px; font-family: 'Noto Serif TC', serif; cursor: pointer; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .hidden { display: none; }
    </style>
</head>
<body>

<header>
    <h1>ç¦å²¡è¡Œæ—… 2026</h1>
    <div id="weather-info" style="font-size:0.8rem; color:#8D8273;">å–å¾—å¤©æ°£ä¸­...</div>
</header>

<nav class="main-nav">
    <div class="nav-tab active" onclick="switchSection('itinerary')">ğŸ“… è¡Œç¨‹æ—¥èªŒ</div>
    <div class="nav-tab" onclick="switchSection('money')">ğŸ’° å…¬ç©é‡‘</div>
    <div class="nav-tab" onclick="switchSection('food')">ğŸ´ ç¾é£Ÿæ¸…å–®</div>
    <div class="nav-tab" onclick="switchSection('check')">âœ… å‡ºç™¼æª¢æŸ¥</div>
    <div class="nav-tab" onclick="switchSection('tools')">ğŸ”§ è½‰ä¹˜å·¥å…·</div>
</nav>

<div class="container">
    <section id="itinerary-sec" class="content-section active">
        <div class="day-nav" id="day-tabs"></div>
        
        <button class="btn-wood-sm" style="width:100%; padding:10px; margin-bottom:20px; border-style:dashed;" onclick="showEditForm(-1)">+ æ–°å¢è¡Œç¨‹å…§å®¹</button>

        <div id="edit-form-container" class="info-card hidden">
            <h4 id="form-title" style="margin-top:0;">ç·¨è¼¯è¡Œç¨‹</h4>
            <input type="text" id="f-time" class="input-wood" placeholder="æ™‚é–“ (å¦‚ 09:00)">
            <select id="f-type" class="input-wood">
                <option value="hotel">ä½æ‰€ (Hotel)</option>
                <option value="spot">æ™¯é» (Spot)</option>
                <option value="food">é£Ÿäº‹ (Food)</option>
                <option value="trans">äº¤é€š (Trans)</option>
            </select>
            <input type="text" id="f-title" class="input-wood" placeholder="æ´»å‹•åç¨±">
            <input type="text" id="f-desc" class="input-wood" placeholder="ç°¡çŸ­æè¿°">
            <input type="text" id="f-memo" class="input-wood" placeholder="æ”»ç•¥æˆ–é ç´„è™Ÿç¢¼">
            <input type="text" id="f-map" class="input-wood" placeholder="Googleåœ°åœ–é—œéµå­—">
            <button class="btn-save" onclick="saveTripItem()">å„²å­˜è¡Œç¨‹</button>
            <button class="btn-wood-sm" style="width:100%; margin-top:8px;" onclick="hideEditForm()">å–æ¶ˆ</button>
        </div>

        <div id="itinerary-list"></div>
    </section>

    <section id="money-sec" class="content-section">
        <div class="info-card"><h3>ğŸ’° å…¬ç©é‡‘ç®¡ç†</h3><p>è«‹åœ¨æ­¤ç´€éŒ„é ç®—èˆ‡æ”¯å‡ºã€‚</p></div>
    </section>

    <section id="tools-sec" class="content-section">
        <div class="info-card">
            <h4>ğŸ¨ é è¨­ä½æ‰€</h4>
            <p>Fukuoka U-BELL Hotel<br>ä¸­å¤®å€è­¦å›º 1-9-3</p>
        </div>
    </section>
</div>

<script>
    const API_KEY = 'b8f2962f275943c4264c5d1e72c1b21b';
    const CITY_ID = '1863967';
    let currentDay = 1;
    let editingIndex = -1;

    // åˆå§‹ V11 è¡Œç¨‹æ•¸æ“š
    const initialData = {
        1: [
            {t: "11:15", type: "trans", title: "æŠµé”ç¦å²¡ç©ºæ¸¯", desc: "æ­ä¹˜åœ°ä¸‹éµç©ºæ¸¯ç·šç›´é”å¤©ç¥ã€‚", memo: "æç¤ºï¼šåšå¤šç«™å¯å…ˆè™•ç† JR Passã€‚", map: "Fukuoka+Airport"},
            {t: "13:00", type: "hotel", title: "é£¯åº—å¯„æ”¾è¡Œæ", desc: "Fukuoka U-BELL Hotel Check-inã€‚", memo: "å¾å¤©ç¥ç«™æ­¥è¡Œç´„ 10 åˆ†é˜ã€‚", map: "Fukuoka+U-BELL+Hotel"},
            {t: "15:00", type: "spot", title: "å¤§æ¿ å…¬åœ’æ•£ç­–", desc: "é£¯åº—å‡ºç™¼ï¼Œæ­åœ°éµè‡³å¤§æ¿ å…¬åœ’ç«™ã€‚", memo: "å¿…åƒï¼šæ°´ä¸Šæ˜Ÿå·´å…‹ã€‚", map: "Ohori+Park"}
        ],
        2: [
            {t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "å‰å¾€è¥¿éµç¦å²¡ç«™ã€‚", memo: "é–‹å•Ÿå¤ªå®°åºœä¸€æ—¥éŠã€‚", map: "Nishitetsu+Fukuoka+Station"},
            {t: "20:00", type: "hotel", title: "è¿”å›é£¯åº—ä¼‘æ¯", desc: "U-BELL Hotelã€‚", memo: "æ—©é»ä¼‘æ¯ã€‚", map: "Fukuoka+U-BELL+Hotel"}
        ],
        // ...å…¶é¤˜å¤©æ•¸é è¨­ç©ºæ•¸æ“šä¾›æ–°å¢
        3: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "è‡ªç”±æ´»å‹•ã€‚", memo: "", map: "Hakata"}],
        4: [{t: "07:30", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "é«˜åƒç©—ä¸€æ—¥åœ˜ã€‚", memo: "", map: "Hakata+Station"}],
        5: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "è·¨ç¸£è¡Œç¨‹ã€‚", memo: "", map: "Hakata+Station"}],
        6: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "ç”±å¸ƒé™¢ä¹‹æ£®ã€‚", memo: "", map: "Hakata+Station"}],
        7: [{t: "10:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "Check-out å‰å¾€æ©Ÿå ´ã€‚", memo: "ç¥æ—…é€”å¹³å®‰ã€‚", map: "Fukuoka+Airport"}]
    };

    let tripData = JSON.parse(localStorage.getItem('fukuoka_v11_data')) || initialData;

    function switchSection(id) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.getElementById(id + '-sec').classList.add('active');
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    function renderItinerary(day) {
        currentDay = day;
        const list = document.getElementById('itinerary-list');
        list.innerHTML = "";
        
        if(!tripData[day]) tripData[day] = [];
        
        tripData[day].forEach((item, index) => {
            const tags = { hotel: 'tag-hotel', spot: 'tag-spot', food: 'tag-food', trans: 'tag-trans' };
            const names = { hotel: 'ä½æ‰€', spot: 'æ™¯é»', food: 'é£Ÿäº‹', trans: 'äº¤é€š' };
            
            list.innerHTML += `
                <div class="timeline-item">
                    <div class="time">${item.t}</div>
                    <div class="content">
                        <div style="font-weight:700;">
                            <span class="tag ${tags[item.type]}">${names[item.type]}</span> ${item.title}
                        </div>
                        <div style="font-size:0.85rem; color:#6D6D6D;">${item.desc}</div>
                        ${item.memo ? `<div class="item-memo">ğŸ“œ ${item.memo}</div>` : ''}
                        <div class="btn-group">
                            <span class="btn-wood-sm" onclick="showEditForm(${index})">âœ ç·¨è¼¯</span>
                            <span class="btn-wood-sm" onclick="deleteItem(${index})">ğŸ—‘ åˆªé™¤</span>
                            ${item.map ? `<a href="http://google.com/maps/search/ç‡’è‚‰å¤šç‰›0{item.map}&travelmode=transit" target="_blank" class="btn-wood-sm" style="text-decoration:none;">ğŸ§­ åœ°åœ–</a>` : ''}
                        </div>
                    </div>
                </div>`;
        });
    }

    function showEditForm(index) {
        editingIndex = index;
        document.getElementById('edit-form-container').classList.remove('hidden');
        if(index > -1) {
            const item = tripData[currentDay][index];
            document.getElementById('f-time').value = item.t;
            document.getElementById('f-type').value = item.type;
            document.getElementById('f-title').value = item.title;
            document.getElementById('f-desc').value = item.desc;
            document.getElementById('f-memo').value = item.memo;
            document.getElementById('f-map').value = item.map;
        } else {
            document.querySelectorAll('.input-wood').forEach(i => i.value = "");
            document.getElementById('f-type').value = "spot";
        }
        window.scrollTo(0, document.getElementById('edit-form-container').offsetTop - 100);
    }

    function saveTripItem() {
        const item = {
            t: document.getElementById('f-time').value || "00:00",
            type: document.getElementById('f-type').value,
            title: document.getElementById('f-title').value || "æœªå‘½åè¡Œç¨‹",
            desc: document.getElementById('f-desc').value,
            memo: document.getElementById('f-memo').value,
            map: document.getElementById('f-map').value
        };
        
        if(editingIndex > -1) tripData[currentDay][editingIndex] = item;
        else tripData[currentDay].push(item);
        
        tripData[currentDay].sort((a, b) => a.t.localeCompare(b.t));
        localStorage.setItem('fukuoka_v11_data', JSON.stringify(tripData));
        hideEditForm();
        renderItinerary(currentDay);
    }

    function deleteItem(index) {
        if(confirm("ç¢ºå®šåˆªé™¤æ­¤è¡Œç¨‹ï¼Ÿ")) {
            tripData[currentDay].splice(index, 1);
            localStorage.setItem('fukuoka_v11_data', JSON.stringify(tripData));
            renderItinerary(currentDay);
        }
    }

    function hideEditForm() { document.getElementById('edit-form-container').classList.add('hidden'); }

    async function fetchWeather() {
        try {
            const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?id=${CITY_ID}&appid=${API_KEY}&units=metric&lang=zh_tw`);
            const d = await res.json();
            if(d.cod === 200) document.getElementById('weather-info').innerText = `ç¦å²¡ï¼š${Math.round(d.main.temp)}Â°C / ${d.weather[0].description}`;
        } catch(e) {}
    }

    window.onload = () => {
        const tabs = document.getElementById('day-tabs');
        for(let i=1; i<=7; i++) {
            tabs.innerHTML += `<div class="day-tab ${i===1?'active':''}" onclick="document.querySelectorAll('.day-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active');renderItinerary(${i})">Day ${i}</div>`;
        }
        fetchWeather();
        renderItinerary(1);
    };
</script>
</body>
</html>
