<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦å²¡è¡Œæ—… 2026 | å¯ç·¨è¼¯æœ¨è³ªæ‰‹å¸–</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --wood-dark: #5D4037; --wood-light: #EFEBE9; --paper: #FAF9F6; 
            --accent-green: #8D9977; --accent-red: #B06B6B; --accent-blue: #78909C; 
            --border: #D7CCC8; --shadow: 0 4px 12px rgba(93, 64, 55, 0.08);
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Noto Sans TC', sans-serif; background-color: var(--wood-light);
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            color: var(--wood-dark); margin: 0; line-height: 1.8; padding-bottom: 50px;
        }
        header { max-width: 900px; margin: 0 auto; padding: 30px 20px; text-align: center; }
        h1 { font-family: 'Noto Serif TC', serif; font-size: 2rem; margin-bottom: 5px; letter-spacing: 3px; }
        
        .main-nav {
            max-width: 800px; margin: 0 auto 20px; display: flex; 
            background: rgba(215, 204, 200, 0.3); padding: 5px; border-radius: 8px; border: 1px solid var(--border);
        }
        .nav-tab { flex: 1; text-align: center; padding: 10px 5px; border-radius: 5px; cursor: pointer; font-family: 'Noto Serif TC', serif; font-size: 0.9rem; }
        .nav-tab.active { background: var(--paper); box-shadow: var(--shadow); font-weight: 700; }

        .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }
        .day-nav { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 25px; scrollbar-width: none; }
        .day-tab { cursor: pointer; padding: 6px 15px; background: var(--paper); border: 1px solid var(--border); border-radius: 4px; font-size: 0.8rem; }
        .day-tab.active { background: var(--wood-dark); color: white; }

        /* è¡Œç¨‹å¡ç‰‡ */
        .timeline-item { display: grid; grid-template-columns: 70px 1fr; margin-bottom: 25px; position: relative; }
        .time { font-family: 'Noto Serif TC', serif; font-weight: 700; font-size: 0.95rem; padding-top: 5px; }
        .content { padding-left: 20px; border-left: 1px solid var(--border); position: relative; padding-bottom: 10px; }
        .content::before { content: ''; position: absolute; left: -4px; top: 12px; width: 7px; height: 7px; background: var(--border); border-radius: 50%; }

        .tag { font-size: 0.65rem; padding: 2px 8px; border-radius: 2px; border: 1px solid; margin-right: 5px; }
        .edit-controls { margin-top: 10px; display: flex; gap: 10px; }
        .btn-sm { font-size: 0.75rem; cursor: pointer; background: none; border: 1px solid var(--border); color: var(--wood-dark); padding: 2px 8px; border-radius: 4px; }
        
        /* ç·¨è¼¯è¡¨å–® */
        .edit-form { background: var(--paper); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border); }
        .input-wood { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid var(--border); background: #fff; border-radius: 4px; color: var(--wood-dark); }
        .btn-save { background: var(--wood-dark); color: white; width: 100%; padding: 10px; border: none; border-radius: 4px; cursor: pointer; }

        .hidden { display: none; }
    </style>
</head>
<body>

<header>
    <h1 contenteditable="true">ç¦å²¡è¡Œæ—… 2026</h1>
    <div id="weather-info">å–å¾—å¤©æ°£ä¸­...</div>
</header>

<div class="main-nav">
    <div class="nav-tab active">ğŸ“… è¡Œç¨‹æ—¥èªŒ</div>
    <div class="nav-tab">ğŸ”§ å…¶ä»–å·¥å…·</div>
</div>

<div class="container">
    <div class="day-nav" id="day-tabs"></div>

    <button class="btn-sm" style="margin-bottom:20px; width:100%; padding:10px;" onclick="showAddForm()">+ æ–°å¢è¡Œç¨‹é …ç›®</button>

    <div id="edit-area" class="edit-form hidden">
        <h4 id="form-title">ç·¨è¼¯é …ç›®</h4>
        <input type="text" id="f-time" class="input-wood" placeholder="æ™‚é–“ (ä¾‹å¦‚ 09:00)">
        <select id="f-type" class="input-wood">
            <option value="hotel">ä½æ‰€ (Hotel)</option>
            <option value="spot">æ™¯é» (Spot)</option>
            <option value="food">é£Ÿäº‹ (Food)</option>
            <option value="trans">äº¤é€š (Trans)</option>
        </select>
        <input type="text" id="f-title" class="input-wood" placeholder="æ¨™é¡Œ">
        <input type="text" id="f-desc" class="input-wood" placeholder="æè¿°">
        <input type="text" id="f-memo" class="input-wood" placeholder="å‚™å¿˜/æ”»ç•¥">
        <input type="text" id="f-map" class="input-wood" placeholder="åœ°åœ–æœå°‹é—œéµå­—">
        <button class="btn-save" onclick="saveItem()">å„²å­˜è¡Œç¨‹</button>
        <button class="btn-sm" style="margin-top:5px; width:100%" onclick="hideForm()">å–æ¶ˆ</button>
    </div>

    <div id="itinerary-content"></div>
</div>

<script>
    let currentDay = 1;
    let editingIndex = -1;

    // é è¨­è¡Œç¨‹è³‡æ–™
    const defaultData = {
        1: [
            {t: "11:15", type: "trans", title: "æŠµé”ç¦å²¡ç©ºæ¸¯", desc: "æ­ä¹˜åœ°ä¸‹éµç©ºæ¸¯ç·šç›´é”å¤©ç¥ã€‚", memo: "æç¤ºï¼šåšå¤šç«™å¯å…ˆåŠƒä½ã€‚", map: "Fukuoka+Airport"},
            {t: "13:00", type: "hotel", title: "Check-in / å¯„æ”¾è¡Œæ", desc: "å‰å¾€ Fukuoka U-BELL Hotelã€‚", memo: "å¾å¤©ç¥ç«™æ­¥è¡Œç´„ 10 åˆ†é˜ã€‚", map: "Fukuoka+U-BELL+Hotel"}
        ],
        2: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "é–‹å•Ÿä»Šæ—¥è¡Œç¨‹ã€‚", memo: "è¨˜å¾—å¸¶å‚˜ã€‚", map: "Fukuoka+U-BELL+Hotel"}],
        3: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "è‡ªç”±æ´»å‹•ã€‚", memo: "æ”¾é¬†å¿ƒæƒ…ã€‚", map: "Fukuoka+U-BELL+Hotel"}],
        4: [{t: "07:30", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "å‰å¾€é«˜åƒç©—ã€‚", memo: "æ—©èµ·åŠ æ²¹ã€‚", map: "Hakata+Station"}],
        5: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "å¸‚å€æ¡è²·ã€‚", memo: "è²·ä¼´æ‰‹ç¦®ã€‚", map: "Hakata+Station"}],
        6: [{t: "09:00", type: "hotel", title: "é£¯åº—å‡ºç™¼", desc: "å‰å¾€ç”±å¸ƒé™¢ã€‚", memo: "çœ‹é¢¨æ™¯ã€‚", map: "Hakata+Station"}],
        7: [{t: "09:30", type: "hotel", title: "æœ€å¾Œå·¡ç¦®", desc: "å‰å¾€æ©Ÿå ´ã€‚", memo: "ç¥ä¸€è·¯é †é¢¨ã€‚", map: "Fukuoka+Airport"}]
    };

    // å¾ LocalStorage è®€å–æˆ–åˆå§‹åŒ–
    let tripData = JSON.parse(localStorage.getItem('fukuoka_trip_v12')) || defaultData;

    function renderItinerary(day) {
        currentDay = day;
        const container = document.getElementById('itinerary-content');
        container.innerHTML = "";
        
        if (!tripData[day]) tripData[day] = [];

        tripData[day].forEach((item, index) => {
            const typeText = { hotel: 'ä½æ‰€', spot: 'æ™¯é»', food: 'é£Ÿäº‹', trans: 'äº¤é€š' };
            container.innerHTML += `
                <div class="timeline-item">
                    <div class="time">${item.t}</div>
                    <div class="content">
                        <div style="font-weight:700;">
                            <span class="tag">${typeText[item.type]}</span> ${item.title}
                        </div>
                        <div style="font-size:0.85rem; color:#666;">${item.desc}</div>
                        <div style="font-size:0.8rem; color:#8D4F31;">ğŸ“œ ${item.memo}</div>
                        <div class="edit-controls">
                            <button class="btn-sm" onclick="editItem(${index})">âœ ç·¨è¼¯</button>
                            <button class="btn-sm" onclick="deleteItem(${index})">ğŸ—‘ åˆªé™¤</button>
                            ${item.map ? `<a href="https://www.google.com/maps/search/?api=1&query=${item.map}&travelmode=transit" target="_blank" class="btn-sm" style="text-decoration:none">ğŸ§­ åœ°åœ–</a>` : ''}
                        </div>
                    </div>
                </div>`;
        });
    }

    function showAddForm() {
        editingIndex = -1;
        document.getElementById('form-title').innerText = "æ–°å¢è¡Œç¨‹ (Day " + currentDay + ")";
        clearForm();
        document.getElementById('edit-area').classList.remove('hidden');
    }

    function editItem(index) {
        editingIndex = index;
        const item = tripData[currentDay][index];
        document.getElementById('form-title').innerText = "ç·¨è¼¯è¡Œç¨‹é …ç›®";
        document.getElementById('f-time').value = item.t;
        document.getElementById('f-type').value = item.type;
        document.getElementById('f-title').value = item.title;
        document.getElementById('f-desc').value = item.desc;
        document.getElementById('f-memo').value = item.memo;
        document.getElementById('f-map').value = item.map || "";
        document.getElementById('edit-area').classList.remove('hidden');
        window.scrollTo(0, 0);
    }

    function saveItem() {
        const newItem = {
            t: document.getElementById('f-time').value,
            type: document.getElementById('f-type').value,
            title: document.getElementById('f-title').value,
            desc: document.getElementById('f-desc').value,
            memo: document.getElementById('f-memo').value,
            map: document.getElementById('f-map').value
        };

        if (editingIndex > -1) {
            tripData[currentDay][editingIndex] = newItem;
        } else {
            tripData[currentDay].push(newItem);
        }

        // æ’åºï¼šæŒ‰æ™‚é–“ç°¡å–®æ’åº
        tripData[currentDay].sort((a, b) => a.t.localeCompare(b.t));

        localStorage.setItem('fukuoka_trip_v12', JSON.stringify(tripData));
        hideForm();
        renderItinerary(currentDay);
    }

    function deleteItem(index) {
        if (confirm("ç¢ºå®šè¦åˆªé™¤é€™å€‹é …ç›®å—ï¼Ÿ")) {
            tripData[currentDay].splice(index, 1);
            localStorage.setItem('fukuoka_trip_v12', JSON.stringify(tripData));
            renderItinerary(currentDay);
        }
    }

    function hideForm() { document.getElementById('edit-area').classList.add('hidden'); }
    function clearForm() {
        document.querySelectorAll('.input-wood').forEach(i => i.value = "");
        document.getElementById('f-type').value = "spot";
    }

    // åˆå§‹åŒ–å¤©æ•¸æŒ‰éˆ•
    const tabs = document.getElementById('day-tabs');
    for(let i=1; i<=7; i++) {
        tabs.innerHTML += `<div class="day-tab ${i===1?'active':''}" onclick="document.querySelectorAll('.day-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active');renderItinerary(${i})">Day ${i}</div>`;
    }

    window.onload = () => renderItinerary(1);
</script>

</body>
</html>
