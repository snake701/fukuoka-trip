<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦å²¡è¡Œæ—… 2026 | æ•¸ä½æ—…è¡Œæ‰‹æœ­ V5</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF8C94;
            --accent: #2D3047;
            --map-blue: #4285F4;
            --food-orange: #FF9800;
            --check-green: #4CAF50;
            --money-purple: #9C27B0;
            --sos-red: #F44336;
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Poppins', 'Noto Sans TC', sans-serif;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            color: var(--accent);
            padding-bottom: 50px;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .container { max-width: 850px; margin: 0 auto; padding: 15px; }

        /* é ‚éƒ¨ç‹€æ…‹æ¬„ */
        .status-header { text-align: center; margin-bottom: 15px; color: white; }
        .countdown-bar {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 8px;
            display: flex;
            justify-content: space-around;
            font-size: 0.75rem;
            margin-top: 10px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        /* å°è¦½åˆ— */
        .main-nav {
            display: flex; background: rgba(255,255,255,0.3);
            padding: 5px; border-radius: 20px; margin-bottom: 20px;
            backdrop-filter: blur(10px);
            overflow-x: auto; scrollbar-width: none;
        }
        .main-tab {
            flex: 1; min-width: 70px; text-align: center; padding: 10px; border-radius: 15px;
            cursor: pointer; font-weight: 700; color: #fff; transition: 0.3s; font-size: 0.85rem;
        }
        .main-tab.active { background: #fff; color: var(--primary); box-shadow: var(--shadow); }

        .content-section { display: none; animation: fadeIn 0.4s ease; }
        .content-section.active { display: block; }

        .info-card { background: #fff; border-radius: 20px; padding: 15px; box-shadow: var(--shadow); margin-bottom: 15px; }
        
        /* å…¬ç©é‡‘æ¨£å¼ */
        .fund-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .fund-summary { font-size: 1.2rem; font-weight: 700; color: var(--money-purple); }
        .table-row { display: grid; grid-template-columns: 1fr 1fr 40px; gap: 10px; margin-bottom: 8px; align-items: center; }
        .table-input { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #ddd; font-size: 0.9rem; }
        .delete-icon { color: #ccc; cursor: pointer; text-align: center; font-weight: bold; }

        /* è¡Œç¨‹èˆ‡æ¸…å–®æ¨£å¼ */
        .day-pane { display: none; }
        .day-pane.active { display: block; }
        .days-nav { display: flex; overflow-x: auto; gap: 8px; margin-bottom: 15px; scrollbar-width: none; }
        .day-btn { background: rgba(255,255,255,0.5); border: none; padding: 10px 18px; border-radius: 50px; cursor: pointer; white-space: nowrap; font-weight: 600; }
        .day-btn.active { background: var(--primary); color: #fff; }
        .timeline-item { display: flex; margin-bottom: 15px; border-left: 2px solid #eee; padding-left: 15px; position: relative; }
        .timeline-item::before { content: ''; position: absolute; left: -7px; width: 12px; height: 12px; background: var(--primary); border-radius: 50%; }
        .time-text { font-weight: 700; color: var(--primary); min-width: 60px; margin-right: 10px; }
        .content-text { font-weight: 600; flex-grow: 1; }

        .btn { padding: 10px 15px; border-radius: 50px; border: none; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block; text-align: center; }
        .btn-primary { background: var(--primary); color: #fff; width: 100%; }
        .btn-add-fund { background: #f3e5f5; color: var(--money-purple); width: 100%; margin-top: 5px; }
        .sos-btn { background: var(--sos-red); color: white; padding: 12px; border-radius: 12px; text-decoration: none; display: flex; align-items: center; justify-content: center; font-weight: 700; margin-bottom: 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <header class="status-header">
        <h2 style="letter-spacing: 2px;">FUKUOKA 2026</h2>
        <div class="countdown-bar">
            <div>ğŸ›« å‡ºç™¼ï¼š<span id="go-countdown">--</span></div>
            <div>ğŸ›¬ å›åœ‹ï¼š<span id="back-countdown">--</span></div>
        </div>
    </header>

    <nav class="main-nav">
        <div class="main-tab active" onclick="switchMain('itinerary')">ğŸ“… è¡Œç¨‹</div>
        <div class="main-tab" onclick="switchMain('food')">ğŸ´ ç¾é£Ÿ</div>
        <div class="main-tab" onclick="switchMain('money')">ğŸ’° å…¬ç©é‡‘</div>
        <div class="main-tab" onclick="switchMain('checklist')">âœ… æ¸…å–®</div>
        <div class="main-tab" onclick="switchMain('tools')">ğŸ”§ å·¥å…·</div>
    </nav>

    <section id="itinerary-sec" class="content-section active">
        <div class="days-nav">
            <button class="day-btn active" onclick="showDay(1)">Day 1</button>
            <button class="day-btn" onclick="showDay(2)">Day 2</button>
            <button class="day-btn" onclick="showDay(3)">Day 3</button>
            <button class="day-btn" onclick="showDay(4)">Day 4</button>
            <button class="day-btn" onclick="showDay(5)">Day 5</button>
            <button class="day-btn" onclick="showDay(6)">Day 6</button>
            <button class="day-btn" onclick="showDay(7)">Day 7</button>
        </div>
        <div class="info-card" id="itinerary-container"></div>
    </section>

    <section id="food-sec" class="content-section">
        <div class="info-card">
            <h3 style="color:var(--food-orange); margin-bottom:10px;">å¿…åƒå£è¢‹åå–®</h3>
            <p style="font-size:0.8rem; margin-bottom:15px;">ğŸ¥© ç‡’è‚‰å¤šç‰›ã€ğŸœ Shin-Shinã€ğŸ¥– æ˜å¤ªå­æ³•åœ‹éºµåŒ…</p>
            <a href="https://maps.app.goo.gl/2V9Y8X7W6V5U4T3S27" target="_blank" class="btn btn-primary" style="background:var(--food-orange)">æœå°‹é™„è¿‘ç†±é–€é¤å»³</a>
        </div>
    </section>

    <section id="money-sec" class="content-section">
        <div class="info-card">
            <div class="fund-header">
                <h3>ğŸ‘¥ æˆå“¡ç¹³è²»</h3>
                <div class="fund-summary">ç¸½æ”¶å…¥ Â¥ <span id="total-income">0</span></div>
            </div>
            <div id="members-list"></div>
            <button class="btn btn-add-fund" onclick="addMember()">+ æ–°å¢æˆå“¡</button>
        </div>

        <div class="info-card">
            <div class="fund-header">
                <h3>ğŸ’¸ æ¶ˆè²»ç´€éŒ„</h3>
                <div class="fund-summary" style="color:var(--sos-red)">é¤˜é¡ Â¥ <span id="fund-balance">0</span></div>
            </div>
            <div id="expenses-list"></div>
            <button class="btn btn-add-fund" onclick="addExpense()" style="background:#fff3e0; color:var(--food-orange)">+ æ–°å¢æ”¯å‡º</button>
        </div>
    </section>

    <section id="checklist-sec" class="content-section">
        <div class="info-card">
            <h3 style="color:var(--check-green); margin-bottom:10px;">ğŸ›ï¸ æ¡è²·æ¸…å–®</h3>
            <div id="check-container"></div>
            <button class="btn btn-primary" onclick="addCheckItem()" style="background:var(--check-green); margin-top:15px;">+ æ–°å¢é …ç›®</button>
        </div>
    </section>

    <section id="tools-sec" class="content-section">
        <div class="info-card" style="border: 2px solid var(--sos-red);">
            <h3 style="color:var(--sos-red); margin-bottom:10px;">ğŸš‘ ç·Šæ€¥æ•‘åŠ©</h3>
            <a href="tel:119" class="sos-btn">ğŸš¨ æ•‘æ€¥è»Š/ç«è­¦ (119)</a>
            <a href="tel:0332807911" class="sos-btn" style="background:var(--map-blue);">ğŸ‡¹ğŸ‡¼ é§æ—¥ä»£è¡¨è™•</a>
        </div>
        <div class="info-card">
            <h3 style="color:var(--primary); margin-bottom:10px;">ğŸ¨ é£¯åº—ï¼šFUKUOKA U-BELL</h3>
            <a href="https://maps.app.goo.gl/2V9Y8X7W6V5U4T3S28" target="_blank" class="btn btn-primary">é–‹å•Ÿå°èˆª</a>
        </div>
    </section>
</div>

<script>
    // --- è³‡æ–™å­˜å„² ---
    const defaultTrip = {
        1: [{t: "11:15", c: "æŠµé”æ©Ÿå ´"}, {t: "13:00", c: "é£¯åº—å¯„ç‰©"}],
        2: [{t: "09:00", c: "ğŸ¨ é£¯åº—å‡ºç™¼"}, {t: "20:00", c: "ğŸ¨ è¿”å›é£¯åº—"}],
        3: [{t: "09:30", c: "ğŸ¨ é£¯åº—å‡ºç™¼"}, {t: "18:00", c: "ğŸ¨ è¿”å›é£¯åº—"}],
        4: [{t: "07:30", c: "ğŸ¨ é£¯åº—å‡ºç™¼"}, {t: "21:00", c: "ğŸ¨ è¿”å›é£¯åº—"}],
        5: [{t: "10:00", c: "ğŸ¨ é£¯åº—å‡ºç™¼"}, {t: "18:30", c: "ğŸ¨ è¿”å›é£¯åº—"}],
        6: [{t: "08:30", c: "ğŸ¨ é£¯åº—å‡ºç™¼"}, {t: "20:30", c: "ğŸ¨ è¿”å›é£¯åº—"}],
        7: [{t: "09:30", c: "é£¯åº—é€€æˆ¿"}, {t: "17:25", c: "æŠµé”æ©Ÿå ´"}]
    };

    let tripData = JSON.parse(localStorage.getItem('fuk_trip_v5')) || defaultTrip;
    let checkData = JSON.parse(localStorage.getItem('fuk_check_v5')) || ["è­·ç…§ã€ä¿éšª", "æ—¥å¹£ç¾é‡‘"];
    let members = JSON.parse(localStorage.getItem('fuk_members')) || [{n: "æˆå“¡1", a: 10000}];
    let expenses = JSON.parse(localStorage.getItem('fuk_expenses')) || [{n: "æ©Ÿå ´äº¤é€š", a: 1500}];

    // --- å…¬ç©é‡‘é‚è¼¯ ---
    function renderFund() {
        const memList = document.getElementById('members-list');
        memList.innerHTML = members.map((m, i) => `
            <div class="table-row">
                <input class="table-input" value="${m.n}" oninput="updateMem(${i},'n',this.value)">
                <input class="table-input" type="number" value="${m.a}" oninput="updateMem(${i},'a',this.value)">
                <div class="delete-icon" onclick="removeMem(${i})">Ã—</div>
            </div>`).join('');

        const expList = document.getElementById('expenses-list');
        expList.innerHTML = expenses.map((e, i) => `
            <div class="table-row">
                <input class="table-input" value="${e.n}" oninput="updateExp(${i},'n',this.value)">
                <input class="table-input" type="number" value="${e.a}" oninput="updateExp(${i},'a',this.value)">
                <div class="delete-icon" onclick="removeExp(${i})">Ã—</div>
            </div>`).join('');

        calculateFund();
    }

    function calculateFund() {
        const totalIncome = members.reduce((sum, m) => sum + Number(m.a || 0), 0);
        const totalExpense = expenses.reduce((sum, e) => sum + Number(e.a || 0), 0);
        document.getElementById('total-income').innerText = totalIncome.toLocaleString();
        document.getElementById('fund-balance').innerText = (totalIncome - totalExpense).toLocaleString();
        localStorage.setItem('fuk_members', JSON.stringify(members));
        localStorage.setItem('fuk_expenses', JSON.stringify(expenses));
    }

    function addMember() { members.push({n: "æ–°æˆå“¡", a: 0}); renderFund(); }
    function removeMem(i) { members.splice(i,1); renderFund(); }
    function updateMem(i,f,v) { members[i][f] = v; calculateFund(); }

    function addExpense() { expenses.push({n: "æ–°æ”¯å‡º", a: 0}); renderFund(); }
    function removeExp(i) { expenses.splice(i,1); renderFund(); }
    function updateExp(i,f,v) { expenses[i][f] = v; calculateFund(); }

    // --- å…¶ä»–åˆ†é é‚è¼¯ ---
    function renderItinerary() {
        const container = document.getElementById('itinerary-container');
        container.innerHTML = '';
        for (let day in tripData) {
            let pane = document.createElement('div');
            pane.className = `day-pane ${day == 1 ? 'active' : ''}`;
            pane.id = `day-${day}`;
            pane.innerHTML = tripData[day].map((item, idx) => `
                <div class="timeline-item">
                    <span class="time-text" contenteditable="true" onblur="saveTrip(${day},${idx},'t',this.innerText)">${item.t}</span>
                    <span class="content-text" contenteditable="true" onblur="saveTrip(${day},${idx},'c',this.innerText)">${item.c}</span>
                </div>`).join('') + `<button class="btn" onclick="addTrip(${day})">+ æ–°å¢</button>`;
            container.appendChild(pane);
        }
    }

    function saveTrip(d, i, f, v) { tripData[d][i][f] = v; localStorage.setItem('fuk_trip_v5', JSON.stringify(tripData)); }
    function addTrip(d) { tripData[d].push({t: "12:00", c: "æ–°å…§å®¹"}); renderItinerary(); showDay(d); }

    function renderChecklist() {
        document.getElementById('check-container').innerHTML = checkData.map((item, idx) => `
            <div class="check-item"><input type="checkbox">
            <span contenteditable="true" onblur="saveCheck(${idx}, this.innerText)">${item}</span>
            <span style="margin-left:auto;color:#ccc" onclick="removeCheck(${idx})">Ã—</span></div>`).join('');
    }

    function saveCheck(i, v) { checkData[i] = v; localStorage.setItem('fuk_check_v5', JSON.stringify(checkData)); }
    function addCheckItem() { checkData.push("æ–°é …ç›®"); renderChecklist(); }
    function removeCheck(i) { checkData.splice(i, 1); renderChecklist(); }

    function switchMain(target) {
        document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        event.currentTarget.classList.add('active');
        document.getElementById(`${target}-sec`).classList.add('active');
    }

    function showDay(day) {
        document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.day-pane').forEach(p => p.classList.remove('active'));
        const btn = document.querySelector(`.day-btn:nth-child(${day})`);
        if(btn) btn.classList.add('active');
        document.getElementById(`day-${day}`).classList.add('active');
    }

    function updateCountdowns() {
        const start = new Date('October 3, 2026 00:00:00').getTime();
        const end = new Date('October 9, 2026 23:59:59').getTime();
        const now = new Date().getTime();
        document.getElementById('go-countdown').innerText = start > now ? Math.floor((start-now)/86400000) + " å¤©" : "æ—…è¡Œä¸­";
        document.getElementById('back-countdown').innerText = end > now ? Math.floor((end-now)/86400000) + " å¤©" : "å·²å›åœ‹";
    }

    window.onload = () => {
        renderItinerary();
        renderChecklist();
        renderFund();
        updateCountdowns();
    };
</script>

</body>
</html>
